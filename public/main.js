(()=>{"use strict";const t=document.querySelector(".btn-delete-all"),e=document.querySelector(".add-task-input"),s=document.querySelector(".todo-list"),i=document.querySelector(".check-all-btn"),l=document.querySelector(".task-quantity"),a=document.querySelector(".todo-list-control"),n=document.querySelector(".btn-complete"),c=document.querySelector(".btn-active"),r=document.querySelector(".btn-all");document.querySelectorAll(".check-task");let o=[];function d(u){i.style.visibility="visible";const v=document.createElement("li");v.setAttribute("data-id",`${u.id}`),v.classList.add("todo-content"),s.appendChild(v);const y=document.createElement("input");y.classList.add("check-task"),y.type="checkbox",y.checked=u.status,v.appendChild(y);const f=document.createElement("input");f.type="text",f.value=`${u.content}`,f.setAttribute("readonly","readonly"),v.appendChild(f);const h=document.createElement("div");h.classList.add("delete-task-btn"),v.appendChild(h);const m=document.createElement("i");m.classList.add("fa-solid"),m.classList.add("fa-xmark"),h.appendChild(m),e.value="",l.innerText=`${o.length} tasks left`,f.addEventListener("dblclick",(function(){this.removeAttribute("readonly");let t=f.value,e=this.parentElement.getAttribute("data-id");f.focus(),f.setSelectionRange(f.value.length,f.value.length),this.addEventListener("blur",(function(){f.setAttribute("readonly","readonly");let i=f.value;for(let l=0;l<o.length;l++)if(o[l].id===parseInt(e)){if(""===i.trim())return o.splice(l,1),localStorage.setItem("tasks",JSON.stringify(o)),s.innerHTML="",o.forEach((t=>{d(t)})),0===o.length&&(a.style.display="none"),void((n.classList.contains("active")||c.classList.contains("active"))&&(n.classList.remove("active"),c.classList.remove("active"),r.classList.add("active")));for(let e=0;e<o.length;e++)if(i===o[e].content)return alert("Please do not enter the same task"),void(f.value=t);o[l].content=i,localStorage.setItem("tasks",JSON.stringify(o))}}))})),h.addEventListener("click",(function(){let e=this.parentElement.getAttribute("data-id");for(let t=0;t<o.length;t++){let t=o.findIndex((function(t){return t.id===parseInt(e)}));-1!==t&&o.splice(t,1)}if(l.innerText=`${o.length} tasks left`,localStorage.setItem("tasks",JSON.stringify(o)),s.removeChild(v),0===o.length)return i.style.visibility="hidden",a.style.display="none",void(t.style.visibility="hidden");o=JSON.parse(localStorage.getItem("tasks")||"[]");let n=0;for(let t=0;t<o.length;t++)o[t].status&&n++;0===n&&(t.style.visibility="hidden")})),y.addEventListener("click",(function(){let e=this.parentElement.getAttribute("data-id"),s=-1,i=0;for(let t=0;t<o.length;t++)s=o.findIndex((function(t){return t.id===parseInt(e)}));-1!==s&&(o[s].status=!o[s].status,localStorage.setItem("tasks",JSON.stringify(o))),o=JSON.parse(localStorage.getItem("tasks")||"[]"),o.forEach((t=>{1==t.status&&i++})),t.style.visibility=i>0?"visible":"hidden"})),i.style.visibility="visible",a.style.display="flex",t.addEventListener("click",(function(){!function(){let e=o.filter((function(t){if(!1===t.status)return t}));o=e,localStorage.setItem("tasks",JSON.stringify(o)),s.innerHTML="",o.forEach((t=>{d(t)})),n.classList.remove("active"),c.classList.remove("active"),r.classList.add("active"),0===o.length&&(a.style.display="none",t.style.visibility="hidden",i.style.visibility="hidden")}(),t.style.visibility="hidden"}))}window.addEventListener("load",(()=>{try{o=JSON.parse(localStorage.getItem("tasks")||"[]")}catch(t){o=[]}if(o.length>0){let e=0;o.forEach((t=>{d(t),t.status&&e++})),e>0&&(t.style.visibility="visible")}let l=0;e.addEventListener("keypress",(function(t){let s={};const i=e.value.trim();if("Enter"===t.key){if(""===i)return void alert("Please fill the placehold");for(let t=0;t<o.length;t++)if(o[t].content===i)return void alert("Please do not enter the same task");s.content=i,s.status=!1,s.id=l,o.push(s),l++,d(s),localStorage.setItem("tasks",JSON.stringify(o))}})),i.addEventListener("click",(function(){let e=0;if(s.innerHTML="",o=JSON.parse(localStorage.getItem("tasks")||"[]"),t.style.visibility="visible",o.forEach((t=>{t.status&&e++})),e===o.length){for(let t=0;t<o.length;t++)o[t].status=!1;localStorage.setItem("tasks",JSON.stringify(o)),t.style.visibility="hidden"}else{for(let t=0;t<o.length;t++)o[t].status=!0;localStorage.setItem("tasks",JSON.stringify(o))}o=JSON.parse(localStorage.getItem("tasks")||"[]"),o.forEach((t=>{d(t)}))})),c.addEventListener("click",(function(){c.classList.contains("active")||(n.classList.remove("active"),c.classList.add("active"),r.classList.remove("active")),t.style.visibility="hidden",s.innerHTML="",o=JSON.parse(localStorage.getItem("tasks")||"[]"),o.forEach((e=>{!1===e.status&&(d(e),t.style.visibility="hidden")}))})),n.addEventListener("click",(function(){n.classList.contains("active")||(n.classList.add("active"),c.classList.remove("active"),r.classList.remove("active")),s.innerHTML="",o=JSON.parse(localStorage.getItem("tasks")||"[]"),o.forEach((e=>{e.status&&(d(e),t.style.visibility="visible")}))})),r.addEventListener("click",(function(){r.classList.contains("active")||(n.classList.remove("active"),c.classList.remove("active"),r.classList.add("active")),s.innerHTML="",o=JSON.parse(localStorage.getItem("tasks")||"[]"),o.forEach((e=>{d(e),e.status&&(t.style.visibility="visible")}))}))}))})();